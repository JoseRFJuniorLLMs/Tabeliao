# =============================================================================
# Tabeliao - Blockchain Service
# Handles on-chain registration, escrow contracts, hash verification, and events
# =============================================================================

# -----------------------------------------------------------------------------
# Service
# -----------------------------------------------------------------------------
NODE_ENV=development
APP_PORT=3004
SERVICE_NAME=blockchain-service

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# Stores: transaction logs, event history, gas usage, contract mappings
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://tabeliao:tabeliao_dev_2026@localhost:5432/tabeliao_db
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USER=tabeliao
DATABASE_PASSWORD=tabeliao_dev_2026
DATABASE_NAME=tabeliao_db
DATABASE_SCHEMA=blockchain

# -----------------------------------------------------------------------------
# Redis (Caching & Queues)
# Used for: nonce management, gas price caching, tx status polling
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379

# -----------------------------------------------------------------------------
# RabbitMQ (Message Broker)
# Queues: blockchain.register, blockchain.verify, blockchain.escrow
# Consumes: contract.signed (auto-register on blockchain)
# Publishes: blockchain.confirmed, blockchain.failed
# -----------------------------------------------------------------------------
RABBITMQ_URL=amqp://tabeliao:tabeliao_dev_2026@localhost:5672

# -----------------------------------------------------------------------------
# Polygon Network (Amoy Testnet)
# Amoy is the current Polygon PoS testnet (replaced Mumbai)
# Faucet: https://faucet.polygon.technology/
# Explorer: https://amoy.polygonscan.com
# -----------------------------------------------------------------------------
POLYGON_RPC_URL=https://rpc-amoy.polygon.technology
POLYGON_PRIVATE_KEY=
POLYGON_CHAIN_ID=80002
POLYGON_EXPLORER_URL=https://amoy.polygonscan.com

# Gas configuration
POLYGON_GAS_LIMIT=500000
POLYGON_MAX_FEE_PER_GAS=50
POLYGON_MAX_PRIORITY_FEE=30

# Smart Contract Addresses (set after deployment via Hardhat)
CONTRACT_REGISTRY_ADDRESS=
ESCROW_FACTORY_ADDRESS=
ARBITRATION_MANAGER_ADDRESS=

# -----------------------------------------------------------------------------
# Chainlink Oracle
# Used for: external data feeds (currency rates for escrow)
# -----------------------------------------------------------------------------
CHAINLINK_NODE_URL=http://localhost:6688
CHAINLINK_JOB_ID=

# -----------------------------------------------------------------------------
# IPFS (Pinata) - Document Hash Storage
# Contract content hashes are pinned to IPFS before on-chain registration
# -----------------------------------------------------------------------------
IPFS_GATEWAY_URL=https://gateway.pinata.cloud/ipfs
IPFS_API_KEY=
IPFS_API_SECRET=

# -----------------------------------------------------------------------------
# Event Listener Configuration
# Polling interval for blockchain events (ms)
# -----------------------------------------------------------------------------
EVENT_POLL_INTERVAL=5000
EVENT_CONFIRMATIONS_REQUIRED=3

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
LOG_LEVEL=debug
