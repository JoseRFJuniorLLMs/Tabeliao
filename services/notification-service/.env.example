# =============================================================================
# Tabeliao - Notification Service
# Handles email, WhatsApp, SMS, and push notification delivery
# =============================================================================

# -----------------------------------------------------------------------------
# Service
# -----------------------------------------------------------------------------
NODE_ENV=development
APP_PORT=3006
SERVICE_NAME=notification-service

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# Stores: notification logs, delivery status, templates, user preferences
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://tabeliao:tabeliao_dev_2026@localhost:5432/tabeliao_db
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USER=tabeliao
DATABASE_PASSWORD=tabeliao_dev_2026
DATABASE_NAME=tabeliao_db
DATABASE_SCHEMA=notification

# -----------------------------------------------------------------------------
# Redis (Queues & Rate Limiting)
# Used for: notification queue, rate limiting per channel, deduplication
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379

# -----------------------------------------------------------------------------
# RabbitMQ (Message Broker)
# Queues: notification.email, notification.whatsapp, notification.sms, notification.push
# Consumes: contract.*, payment.*, dispute.* (event-driven notifications)
# -----------------------------------------------------------------------------
RABBITMQ_URL=amqp://tabeliao:tabeliao_dev_2026@localhost:5672

# -----------------------------------------------------------------------------
# Email - SendGrid
# In development, emails are captured by Mailhog at http://localhost:8025
# Dashboard: https://app.sendgrid.com/
# -----------------------------------------------------------------------------
SENDGRID_API_KEY=
SENDGRID_FROM_EMAIL=noreply@tabeliao.com.br
SENDGRID_FROM_NAME=Tabeliao

# Development: use Mailhog SMTP instead of SendGrid
# Set USE_MAILHOG=true to redirect all emails to Mailhog
USE_MAILHOG=true
MAILHOG_HOST=localhost
MAILHOG_PORT=1025

# -----------------------------------------------------------------------------
# WhatsApp - Meta Business API
# Docs: https://developers.facebook.com/docs/whatsapp/cloud-api
# Test numbers: https://developers.facebook.com/docs/whatsapp/cloud-api/get-started
# -----------------------------------------------------------------------------
WHATSAPP_API_URL=https://graph.facebook.com/v18.0
WHATSAPP_API_TOKEN=
WHATSAPP_PHONE_NUMBER_ID=
WHATSAPP_BUSINESS_ACCOUNT_ID=
WHATSAPP_VERIFY_TOKEN=

# -----------------------------------------------------------------------------
# SMS - Twilio
# Dashboard: https://console.twilio.com/
# Test credentials: https://www.twilio.com/docs/iam/test-credentials
# -----------------------------------------------------------------------------
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# -----------------------------------------------------------------------------
# Push Notifications - Firebase Cloud Messaging
# Console: https://console.firebase.google.com/
# Service account key JSON required
# -----------------------------------------------------------------------------
FIREBASE_PROJECT_ID=
FIREBASE_CLIENT_EMAIL=
FIREBASE_PRIVATE_KEY=

# -----------------------------------------------------------------------------
# Notification Rate Limits (per user per hour)
# -----------------------------------------------------------------------------
RATE_LIMIT_EMAIL=50
RATE_LIMIT_WHATSAPP=20
RATE_LIMIT_SMS=10
RATE_LIMIT_PUSH=100

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
LOG_LEVEL=debug
